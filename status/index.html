<!DOCTYPE html>
<html lang="en" x-data="domainMonitor()" x-init="init()">
<head>
  <meta charset="UTF-8">
  <title>Domain Monitor</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body class="bg-gray-900 text-gray-50 px-6 flex flex-col min-h-screen">

<div class="max-w-5xl w-full mx-auto space-y-10">

  <!-- Header -->
  <div class="pt-20 flex flex-col items-center">
    <span class="mx-auto inline-flex items-center justify-center rounded-full"
          :class="allUp ? 'bg-emerald-100 dark:bg-emerald-400/20 dark:to-emerald-500/10' : 'bg-red-100 dark:bg-red-400/20 dark:to-red-500/10'">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" aria-hidden="true" class="remixicon text-green size-10"
           :class="allUp ? 'text-emerald-500' : 'text-red-600'">
        <path x-show="allUp" d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM17.457 9.457 11 15.914 6.793 11.707 8.207 10.293 11 13.086 16.043 8.043 17.457 9.457Z"></path><path x-show="!allUp" d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM15 9l-6 6M9 9l6 6"></path>
      </svg>
    </span>
    <h1 class="mt-3 text-lg font-semibold text-gray-900 dark:text-gray-50"
        :class="allUp ? 'text-gray-900 dark:text-gray-50' : 'text-red-600 dark:text-red-400'">
      <span x-text="allUp ? 'All services are online' : 'Some services are down'"></span>
    </h1>
    <p class="text-sm text-gray-700 dark:text-gray-300">Last updated on <span x-text="lastUpdated"></span></p>
  </div>

  <div>
    <template x-for="(domain, idx) in domains" :key="idx">
      <div class="border rounded-lg p-4 bg-white dark:bg-[#090E1A] dark:border-gray-900 space-y-2">
        
        <!-- Toggle -->
        <button @click="domain.open = !domain.open"
                class="w-full flex justify-between items-center bg-gray-100 dark:bg-gray-800 p-4 rounded-lg text-sm font-medium text-gray-900 dark:text-gray-50">
          <span x-text="domain.domain"></span>
          <span class="flex items-center gap-1" :class="domain.http_ok ? 'text-emerald-500' : 'text-red-600'">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
              <path x-show="domain.http_ok" d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM17.457 9.457 11 15.914 6.793 11.707 8.207 10.293 11 13.086 16.043 8.043 17.457 9.457Z"></path>
              <path x-show="!domain.http_ok" d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM15 9l-6 6M9 9l6 6"></path>
            </svg>
            <span x-text="domain.http_ok ? 'Operational' : 'Down'"></span>
          </span>
        </button>
  
        <!-- Panel -->
        <div x-show="domain.open" class="mt-2 p-2 space-y-2 text-sm text-gray-700 dark:text-gray-200">

          <div class="space-y-2">

            <!-- name and btn -->
            <div class="flex gap-4 justify-between items-center">
              <h3 class="mt-2 text-lg font-medium text-gray-900 dark:text-gray-50">
                <a :href="`http://${domain.domain}`" :title="`Visit http://${domain.domain}`" target="_blank"
                   class="relative border-b-2 border-transparent hover:border-gray-900 dark:hover:border-gray-50 transition-all duration-300"
                   x-text="domain.domain"></a>
              </h3>
          
              <a :href="`domain.html?domain=${domain.domain}`"
                 class="relative inline-flex items-center justify-center whitespace-nowrap rounded-md border px-3 py-2 text-center text-sm font-medium shadow-sm transition-all duration-100 ease-in-out disabled:pointer-events-none disabled:shadow-none outline outline-offset-2 outline-0 focus-visible:outline-2 outline-blue-500 dark:outline-blue-500 border-gray-300 dark:border-gray-800 text-gray-900 dark:text-gray-50 bg-white dark:bg-gray-950 hover:bg-gray-50 dark:hover:bg-gray-900/60 disabled:text-gray-400 disabled:dark:text-gray-600">
                 View Detailed Data
              </a>
            </div>
          </div>





<dl class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">


    <div class="relative w-full rounded-lg border p-6 text-left shadow-sm bg-white dark:bg-[#090E1A] border-gray-200 dark:border-gray-900" >
        <dt class="text-sm font-medium text-gray-500 dark:text-gray-500">Status code</dt>
        <dd class="text-3xl font-semibold text-gray-900 dark:text-gray-50" x-text="domain.http_status"></dd>
        <dd class="mt-4 inline-flex items-center gap-x-1.5 rounded-md px-2 py-1.5 text-xs font-medium"
            :class="httpStatusInfo(domain.http_status).class"
            x-html="httpStatusInfo(domain.http_status).icon + ' ' + httpStatusInfo(domain.http_status).text">
        </dd>
    </div>

    <div class="relative w-full rounded-lg border p-6 text-left shadow-sm bg-white dark:bg-[#090E1A] border-gray-200 dark:border-gray-900" >
        <dt class="text-sm font-medium text-gray-500 dark:text-gray-500">Response time</dt>
        <dd class="text-3xl font-semibold text-gray-900 dark:text-gray-50" x-text="Number(domain.http_response_time_ms).toFixed(2)"></dd>
        <dd class="mt-4 inline-flex items-center gap-x-1.5 rounded-md px-2 py-1.5 text-xs font-medium"
            :class="responseTimeInfo(domain.http_response_time_ms).class"
            x-html="responseTimeInfo(domain.http_response_time_ms).icon + ' ' + responseTimeInfo(domain.http_response_time_ms).text">
        </dd>
    </div>

    <div class="relative w-full rounded-lg border p-6 text-left shadow-sm bg-white dark:bg-[#090E1A] border-gray-200 dark:border-gray-900" >
        <dt class="text-sm font-medium text-gray-500 dark:text-gray-500">SSL status</dt>
        <dd class="text-3xl font-semibold text-gray-900 dark:text-gray-50" x-text="domain.ssl_ok"></dd>
        <dd class="mt-4 inline-flex items-center gap-x-1.5 rounded-md px-2 py-1.5 text-xs font-medium"
            :class="sslStatusInfo(domain.ssl_ok).class">
            <span x-html="sslStatusInfo(domain.ssl_ok).icon"></span> Expires on: <span x-text="domain.ssl_expiry"></span>
        </dd>
    </div>


    <div class="relative w-full rounded-lg border p-6 text-left shadow-sm bg-white dark:bg-[#090E1A] border-gray-200 dark:border-gray-900" >
        <dt class="text-sm font-medium text-gray-500 dark:text-gray-500">WHOIS status</dt>
        <dd class="text-3xl font-semibold text-gray-900 dark:text-gray-50" x-text="domain.whois_ok"></dd>
        <dd class="mt-4 inline-flex items-center gap-x-1.5 rounded-md px-2 py-1.5 text-xs font-medium"
            :class="whoisStatusInfo(domain.whois_ok).class">
            <span x-html="whoisStatusInfo(domain.whois_ok).icon"></span> Expires on: <span x-text="domain.whois_expiry"></span>
        </dd>
    </div>

      <div class="relative w-full rounded-lg border p-6 text-left shadow-sm bg-white dark:bg-[#090E1A] border-gray-200 dark:border-gray-900" >
        <dt class="text-sm font-medium text-gray-500 dark:text-gray-500">IP address</dt>
        <dd class="text-3xl font-semibold text-gray-900 dark:text-gray-50" x-text="domain.resolved_ip"></dd>
    </div>

  
</dl>

  
        </div>
      </div>
    </template>
  </div>
</div>
<small class="mt-auto text-center p-5">⚡ Subscribe via RSS — <a href="index.xml" target="_blank" class="no-underline">to all updates</a></small>
<a class="top-0 right-0 absolute" href="https://github.com/stefanpejcic/domain-monitor"><img loading="lazy" decoding="async" width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png" class="attachment-full size-full" alt="Fork me on GitHub"></a>

<script>
function domainMonitor() {
  return {
    ip_address: '',
    lastUpdated: '',
    domains: [],
    get allUp() {
      return this.domains.every(d => d.http_ok && d.whois_ok && d.ssl_ok);
    },
    httpStatusInfo(status) {
      if (status < 200) {
        return {
          class: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-400/10 dark:text-yellow-500',
          icon: `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" aria-hidden="true" class="remixicon size-4 shrink-0"><path d="M12.0003 3C17.3924 3 21.8784 6.87976 22.8189 12C21.8784 17.1202 17.3924 21 12.0003 21C6.60812 21 2.12215 17.1202 1.18164 12C2.12215 6.87976 6.60812 3 12.0003 3ZM12.0003 19C16.2359 19 19.8603 16.052 20.7777 12C19.8603 7.94803 16.2359 5 12.0003 5C7.7646 5 4.14022 7.94803 3.22278 12C4.14022 16.052 7.7646 19 12.0003 19ZM12.0003 16.5C9.51498 16.5 7.50026 14.4853 7.50026 12C7.50026 9.51472 9.51498 7.5 12.0003 7.5C14.4855 7.5 16.5003 9.51472 16.5003 12C16.5003 14.4853 14.4855 16.5 12.0003 16.5ZM12.0003 14.5C13.381 14.5 14.5003 13.3807 14.5003 12C14.5003 10.6193 13.381 9.5 12.0003 9.5C10.6196 9.5 9.50026 10.6193 9.50026 12C9.50026 13.3807 10.6196 14.5 12.0003 14.5Z"></path></svg>`,
          text: 'bellow: 200'
        };
      } else if (status <= 410) {
        return {
          class: 'bg-emerald-100 text-emerald-800 dark:bg-emerald-400/10 dark:text-emerald-500',
          icon: `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" aria-hidden="true" class="remixicon size-4 shrink-0"><path d="M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"></path></svg>`,
          text: 'within: 200-410'
        };
      } else if (status > 410) {
        return {
          class: 'bg-red-100 text-red-800 dark:bg-red-400/10 dark:text-red-500',
          icon: `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" aria-hidden="true" class="remixicon size-4 shrink-0"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 15H13V17H11V15ZM11 7H13V13H11V7Z"></path></svg>`,
          text: 'critical: 410+'
        };
      } else {
        return {
          class: '',
          icon: '',
          text: 'unknown'
        };
      }
    },


    responseTimeInfo(ms) {
      if (ms < 200) {
        return {
          class: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-400/10 dark:text-yellow-500',
          icon: `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" aria-hidden="true" class="remixicon size-4 shrink-0"><path d="M12.0003 3C17.3924 3 21.8784 6.87976 22.8189 12C21.8784 17.1202 17.3924 21 12.0003 21C6.60812 21 2.12215 17.1202 1.18164 12C2.12215 6.87976 6.60812 3 12.0003 3ZM12.0003 19C16.2359 19 19.8603 16.052 20.7777 12C19.8603 7.94803 16.2359 5 12.0003 5C7.7646 5 4.14022 7.94803 3.22278 12C4.14022 16.052 7.7646 19 12.0003 19ZM12.0003 16.5C9.51498 16.5 7.50026 14.4853 7.50026 12C7.50026 9.51472 9.51498 7.5 12.0003 7.5C14.4855 7.5 16.5003 9.51472 16.5003 12C16.5003 14.4853 14.4855 16.5 12.0003 16.5ZM12.0003 14.5C13.381 14.5 14.5003 13.3807 14.5003 12C14.5003 10.6193 13.381 9.5 12.0003 9.5C10.6196 9.5 9.50026 10.6193 9.50026 12C9.50026 13.3807 10.6196 14.5 12.0003 14.5Z"></path></svg>`,
          text: 'fast: <200ms'
        };
      } else if (ms <= 500) {
        return {
          class: 'bg-emerald-100 text-emerald-800 dark:bg-emerald-400/10 dark:text-emerald-500',
          icon: `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" aria-hidden="true" class="remixicon size-4 shrink-0"><path d="M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"></path></svg>`,
          text: 'moderate: 200–500ms'
        };
      } else if (ms > 500) {
        return {
          class: 'bg-red-100 text-red-800 dark:bg-red-400/10 dark:text-red-500',
          icon: `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" aria-hidden="true" class="remixicon size-4 shrink-0"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 15H13V17H11V15ZM11 7H13V13H11V7Z"></path></svg>`,
          text: 'slow: >500ms'
        };
      } else {
        return {
          class: '',
          icon: '',
          text: 'unknown'
        };
      }
    },
    
    sslStatusInfo(isOk) {
      if (isOk) {
        return {
          class: 'bg-emerald-100 text-emerald-800 dark:bg-emerald-400/10 dark:text-emerald-500',
          icon: `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="remixicon size-4 shrink-0"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15l-5-5 1.41-1.41L11 14.17l7.59-7.59L20 8l-9 9z"/></svg>`
        };
      } else {
        return {
          class: 'bg-red-100 text-red-800 dark:bg-red-400/10 dark:text-red-500',
          icon: `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="remixicon size-4 shrink-0"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>`
        };
      }
    },
    whoisStatusInfo(isOk) {
      if (isOk) {
        return {
          class: 'bg-emerald-100 text-emerald-800 dark:bg-emerald-400/10 dark:text-emerald-500',
          icon: `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="remixicon size-4 shrink-0"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15l-5-5 1.41-1.41L11 14.17l7.59-7.59L20 8l-9 9z"/></svg>`
        };
      } else {
        return {
          class: 'bg-red-100 text-red-800 dark:bg-red-400/10 dark:text-red-500',
          icon: `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="remixicon size-4 shrink-0"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>`
        };
      }
    },
  
    whoisColor(ok) {
      return ok ? 'bg-emerald-100 text-emerald-800 dark:bg-emerald-400/10 dark:text-emerald-500' : 'bg-red-100 text-red-800 dark:bg-red-400/10 dark:text-red-500';
    },
    async init() {
      const res = await fetch('status.json?_=' + Date.now());
      const data = await res.json();
      this.ip_address = data.ip_address;
      this.lastUpdated = data.last_updated;
      this.domains = data.domains.map(d => ({ ...d, open: false }));
    }
  }
}
</script>

</body>
</html>
