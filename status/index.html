<!DOCTYPE html>
<html lang="en" x-data="domainMonitor()" x-init="loadStatus()">
<head>
  <meta charset="UTF-8">
  <title>Domain Monitor</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body class="bg-gray-900 text-gray-50 px-6 flex flex-col min-h-screen">

<div class="max-w-5xl w-full mx-auto space-y-10">

  <!-- Header -->
  <div class="pt-20 flex flex-col items-center">
    <span class="mx-auto inline-flex items-center justify-center rounded-full"
          :class="allUp ? 'bg-emerald-100 dark:bg-emerald-400/20 dark:to-emerald-500/10' : 'bg-red-100 dark:bg-red-400/20 dark:to-red-500/10'">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" aria-hidden="true" class="remixicon text-green size-10"
           :class="allUp ? 'text-emerald-500' : 'text-red-600'">
        <path x-show="allUp" d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM17.457 9.457 11 15.914 6.793 11.707 8.207 10.293 11 13.086 16.043 8.043 17.457 9.457Z"></path><path x-show="!allUp" d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM15 9l-6 6M9 9l6 6"></path>
      </svg>
    </span>
    <h1 class="mt-3 text-lg font-semibold text-gray-900 dark:text-gray-50"
        :class="allUp ? 'text-gray-900 dark:text-gray-50' : 'text-red-600 dark:text-red-400'">
      <span x-text="allUp ? 'All services are online' : 'Some services are down'"></span>
    </h1>
    <p class="text-sm text-gray-700 dark:text-gray-300">Last updated on <span x-text="lastUpdated"></span></p>
  </div>

  <div x-data="domainMonitor()">
    <template x-for="(domain, idx) in domains" :key="idx">
      <div class="border rounded-lg p-4 bg-white dark:bg-[#090E1A] dark:border-gray-900 space-y-2">
        
        <!-- Toggle -->
        <button @click="domain.open = !domain.open"
                class="w-full flex justify-between items-center bg-gray-100 dark:bg-gray-800 p-4 rounded-lg text-sm font-medium text-gray-900 dark:text-gray-50">
          <span x-text="domain.domain"></span>
          <span class="flex items-center gap-1" :class="domain.http_ok ? 'text-emerald-500' : 'text-red-600'">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
              <path x-show="domain.http_ok" d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM17.457 9.457 11 15.914 6.793 11.707 8.207 10.293 11 13.086 16.043 8.043 17.457 9.457Z"></path>
              <path x-show="!domain.http_ok" d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM15 9l-6 6M9 9l6 6"></path>
            </svg>
            <span x-text="domain.http_ok ? 'Operational' : 'Down'"></span>
          </span>
        </button>
  
        <!-- Panel -->
        <div x-show="domain.open" class="mt-2 p-2 space-y-2 text-sm text-gray-700 dark:text-gray-200">

          <div class="space-y-2">
            <!-- Status + Operational badge -->
            <div class="flex items-center space-x-1.5">
              <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor" 
                   :class="domain.http_ok ? 'text-emerald-500' : 'text-red-600'">
                <path x-show="domain.http_ok" d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM17.457 9.457 11 15.914 6.793 11.707 8.207 10.293 11 13.086 16.043 8.043 17.457 9.457Z"></path>
                <path x-show="!domain.http_ok" d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM15 9l-6 6M9 9l6 6"></path>
              </svg>
              <span class="text-sm font-medium" :class="domain.http_ok ? 'text-emerald-500' : 'text-red-600'" 
                    x-text="domain.http_ok ? 'Operational' : 'Down'"></span>
            </div>
          
            <!-- Domain name + Detailed Data button -->
            <div class="flex gap-4 justify-between items-center">
              <h3 class="mt-2 text-lg font-medium text-gray-900 dark:text-gray-50">
                <a :href="`http://${domain.domain}`" :title="`Visit http://${domain.domain}`" target="_blank"
                   class="relative border-b-2 border-transparent hover:border-gray-900 dark:hover:border-gray-50 transition-all duration-300"
                   x-text="domain.domain"></a>
              </h3>
          
              <a :href="`domain.html?domain=${domain.domain}`"
                 class="relative inline-flex items-center justify-center whitespace-nowrap rounded-md border px-3 py-2 text-center text-sm font-medium shadow-sm transition-all duration-100 ease-in-out disabled:pointer-events-none disabled:shadow-none outline outline-offset-2 outline-0 focus-visible:outline-2 outline-blue-500 dark:outline-blue-500 border-gray-300 dark:border-gray-800 text-gray-900 dark:text-gray-50 bg-white dark:bg-gray-950 hover:bg-gray-50 dark:hover:bg-gray-900/60 disabled:text-gray-400 disabled:dark:text-gray-600">
                 View Detailed Data
              </a>
            </div>
          </div>




          
          <!-- Info badges -->
          <div class="flex flex-wrap gap-2">
            <!-- Checked from -->
            <span class="inline-flex items-center gap-1.5 rounded-md bg-gray-100 px-2.5 py-1 text-gray-600 dark:bg-gray-800 dark:text-gray-400">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                <path d="M18.364 17.364L12 23.728 5.636 17.364C2.121 13.849 2.121 8.151 5.636 4.636 9.151 1.121 14.849 1.121 18.364 4.636 21.879 8.151 21.879 13.849 18.364 17.364ZM12 13C13.105 13 14 12.105 14 11 14 9.895 13.105 9 12 9 10.895 9 10 9.895 10 11 10 12.105 10.895 13 12 13Z"></path>
              </svg>
              Checked from: <span x-text="ip_address"></span>
            </span>
  
            <!-- WHOIS -->
            <span class="inline-flex items-center gap-1.5 rounded-md bg-gray-100 px-2.5 py-1"
                  :class="domain.whois_ok ? 'text-emerald-500 dark:bg-emerald-400/10 dark:text-emerald-500' : 'text-red-600 dark:bg-red-400/10 dark:text-red-500'">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                <path x-show="domain.whois_ok" d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM17.457 9.457 11 15.914 6.793 11.707 8.207 10.293 11 13.086 16.043 8.043 17.457 9.457Z"></path>
                <path x-show="!domain.whois_ok" d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM15 9l-6 6M9 9l6 6"></path>
              </svg>
              <span x-text="domain.whois_expiry || 'N/A'"></span>
            </span>
  
            <!-- Last checked -->
            <span class="inline-flex items-center gap-1.5 rounded-md bg-gray-100 px-2.5 py-1 text-gray-600 dark:bg-gray-800 dark:text-gray-400">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                <path d="M12 22C6.477 22 2 17.523 2 12 2 6.477 6.477 2 12 2 17.523 2 22 6.477 22 12 22 17.523 17.523 22 12 22ZM11 15H13V17H11V15ZM11 7H13V13H11V7Z"></path>
              </svg>
              Last checked: <span x-text="domain.timestamp"></span>
            </span>
          </div>
  
          <!-- Metrics -->
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-2">
            <!-- HTTP Status -->
            <div class="border rounded-lg p-3" :class="httpStatusColor(domain.http_status)">
              <dt class="text-sm font-medium text-gray-500 dark:text-gray-500 flex items-center gap-1">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                  <path d="M12 22C17.523 22 22 17.523 22 12 22 6.477 17.523 2 12 2 6.477 2 2 6.477 2 12 2 17.523 6.477 22 12 22ZM17.457 9.457 11 15.914 6.793 11.707 8.207 10.293 11 13.086 16.043 8.043 17.457 9.457Z"></path>
                </svg>
                Status code
              </dt>
              <dd class="text-xl font-semibold" x-text="domain.http_status"></dd>
            </div>
  
            <!-- Response time -->
            <div class="border rounded-lg p-3" :class="responseTimeColor(domain.http_response_time_ms)">
              <dt class="text-sm font-medium text-gray-500 dark:text-gray-500 flex items-center gap-1">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                  <path d="M12 22C6.477 22 2 17.523 2 12 2 6.477 6.477 2 12 2 17.523 2 22 6.477 22 12 22 17.523 17.523 22 12 22ZM12 16a1 1 0 110-2 1 1 0 010 2ZM12 10a2 2 0 110-4 2 2 0 010 4Z"></path>
                </svg>
                Response time (ms)
              </dt>
              <dd class="text-xl font-semibold" x-text="domain.http_response_time_ms.toFixed(0)"></dd>
            </div>
  
            <!-- IP address -->
            <div class="border rounded-lg p-3">
              <dt class="text-sm font-medium text-gray-500 dark:text-gray-500 flex items-center gap-1">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                  <path d="M12 2C6.477 2 2 6.477 2 12c0 4.418 3.582 8 8 8s8-3.582 8-8c0-5.523-4.477-10-10-10zM12 20c-4.418 0-8-3.582-8-8 0-4.418 3.582-8 8-8 4.418 0 8 3.582 8 8 0 4.418-3.582 8-8 8z"></path>
                </svg>
                IP address
              </dt>
              <dd class="text-xl font-semibold" x-text="domain.resolved_ip"></dd>
            </div>
  
            <!-- SSL -->
            <div class="border rounded-lg p-3" :class="sslColor(domain.ssl_ok)">
              <dt class="text-sm font-medium text-gray-500 dark:text-gray-500 flex items-center gap-1">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                  <path d="M12 1C7.037 1 3 5.037 3 10v4c0 5.523 4.477 10 10 10s10-4.477 10-10v-4c0-4.963-4.037-9-9-9zM12 21c-3.866 0-7-3.134-7-7v-4c0-3.866 3.134-7 7-7s7 3.134 7 7v4c0 3.866-3.134 7-7 7z"></path>
                </svg>
                SSL
              </dt>
              <dd class="text-xl font-semibold" x-text="domain.ssl_ok"></dd>
            </div>


            <!-- WHOIS -->
            <div class="border rounded-lg p-3" :class="whoisColor(domain.whois_ok)">
              <dt class="text-sm font-medium text-gray-500 dark:text-gray-500 flex items-center gap-1">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                  <path d="M12 1C7.037 1 3 5.037 3 10v4c0 5.523 4.477 10 10 10s10-4.477 10-10v-4c0-4.963-4.037-9-9-9zM12 21c-3.866 0-7-3.134-7-7v-4c0-3.866 3.134-7 7-7s7 3.134 7 7v4c0 3.866-3.134 7-7 7z"></path>
                </svg>
                WHOIS
              </dt>
              <dd class="text-xl font-semibold" x-text="domain.whois_ok"></dd>
            </div>
            
          </div>
  
        </div>
      </div>
    </template>
  </div>
</div>
<small class="mt-auto text-center p-5">⚡ Subscribe via RSS — <a href="index.xml" target="_blank" class="no-underline">to all updates</a></small>
<a class="top-0 right-0 absolute" href="https://github.com/stefanpejcic/domain-monitor"><img loading="lazy" decoding="async" width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png" class="attachment-full size-full" alt="Fork me on GitHub"></a>

<script>
function domainMonitor() {
  return {
    ip_address: '',
    lastUpdated: '',
    domains: [],
    get allUp() {
      return this.domains.every(d => d.http_ok && d.whois_ok);
    },
    httpStatusColor(status) {
      if (status < 200) return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-400/10 dark:text-yellow-500';
      if (status <= 410) return 'bg-emerald-100 text-emerald-800 dark:bg-emerald-400/10 dark:text-emerald-500';
      if (status > 500) return 'bg-red-100 text-red-800 dark:bg-red-400/10 dark:text-red-500';
      return '';
    },
    responseTimeColor(ms) {
      if (ms < 200) return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-400/10 dark:text-yellow-500';
      if (ms <= 500) return 'bg-emerald-100 text-emerald-800 dark:bg-emerald-400/10 dark:text-emerald-500';
      if (ms > 500) return 'bg-red-100 text-red-800 dark:bg-red-400/10 dark:text-red-500';
      return '';
    },
    sslColor(ok) {
      return ok ? 'bg-emerald-100 text-emerald-800 dark:bg-emerald-400/10 dark:text-emerald-500' : 'bg-red-100 text-red-800 dark:bg-red-400/10 dark:text-red-500';
    },
    whoisColor(ok) {
      return ok ? 'bg-emerald-100 text-emerald-800 dark:bg-emerald-400/10 dark:text-emerald-500' : 'bg-red-100 text-red-800 dark:bg-red-400/10 dark:text-red-500';
    },
    async init() {
      const res = await fetch('status.json?_=' + Date.now());
      const data = await res.json();
      this.ip_address = data.ip_address;
      this.lastUpdated = data.last_updated;
      this.domains = data.domains.map(d => ({ ...d, open: false }));
    }
  }
}
</script>

</body>
</html>
